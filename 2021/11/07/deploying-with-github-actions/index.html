<!DOCTYPE html><html class="appearance-dark" lang="en"><head><meta charset="UTF-8"><title>Deploying static websites with S3 and Github actions: Part I</title><meta name="description" content="Programming, electronics and Opinions in that order"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><!-- Google Analytics --><!-- End Google Analytics -->
<!-- Baidu Analytics --><!-- End Baidu Analytics --><link rel="icon" href="/images/favicon.png"><link rel="stylesheet" href="/style/common/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/common/helper.css"><link rel="stylesheet" href="/style/style.css"><script src="/js/common.js"></script><!--link(rel='stylesheet' href='https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css')--><!--link(rel='stylesheet' href='https://fonts.googleapis.com/icon?family=Material+Icons')--><!--script(src='https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js' crossorigin='anonymous')--><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/themes/highlight-theme-light.css"><script src="/js/highlight.pack.js"></script><meta name="description" content="IntroOnce your awesome Hexo static website is up and running, you may want to deploy it so everybody on the internet can actually read it. fortunately, there are multiple choices, but being myself a humble AWS brainwashed enthusiast, I’m going to introduce you to the github + github actions + route53 + s3 + CloudFront.
Note: Ignore the fact that github is .."><meta name="generator" content="Hexo 6.3.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="Marco Guido's blog" type="application/atom+xml">
</head><body class="is-flex is-flex-direction-column"><script src="/js/nav.js" defer></script><nav class="header-widget navbar is-fixed-top is-hidden-print is-dark" id="navbar" role="navigation" aria-label="main navigation"><div class="navbar-brand is-dark"><a class="navbar-item has-text-centered-mobile is-dark" target="_blank" rel="noopener" href="https://www.guidotorres.mx"><img src="https://www.guidotorres.mx/resume/assets/logo-rounded.svg" width="50" height="50"></a><a class="navbar-item has-text-centered-mobile is-dark is-flex is-flex-shrink-1 is-flex-grow-5 is-justify-content-center" target="_blank" rel="noopener" href="https://www.guidotorres.mx"> guidotorresmx</a><a class="navbar-burger burger is-dark" role="button" aria-label="menu" aria-expanded="false" data-target="navbar-main"><span aria-hidden="true"></span><span aria-hidden="true"></span><span aria-hidden="true"></span></a></div><div class="navbar-menu is-dark" id="navbar-main"><div class="navbar-start has-text-centered-mobile is-dark"><a class="navbar-item is-dark">Blog</a><a class="navbar-item is-dark">About</a><a class="navbar-item is-dark">Resume</a><a class="navbar-item is-dark">Demo</a><span class="navbar-item"></span><span class="navbar-item is-dark is-spaced"><div class="is-full-height" id="postTopic"><!--p.is-full-height.is-flex-shrink-0.is-flex.is-align-items-center.is-justify-content-center= title--><!--p.is-full-height.is-flex-shrink-0.is-flex.is-align-items-center.is-justify-content-center= __('click_back_to_the_top')--></div></span></div><div class="navbar-end has-text-centered-mobile is-size-6-mobile is-dark is-spaced"><div class="navbar-item is-dark"><div class="field is-grouped is-grouped-centered is-hidden-tablet-only is-dark"><!-- Twitter--><a class="button is-dark no-hover" title="twitter" target="_blank" rel="noopener" href="//twitter.com/guidotorresmx"><span class="icon-text"> <span class="icon"><i class="fa fa-brands fa-twitter icon is-flex"></i></span></span></a><!-- Github--><a class="button is-dark no-hover" title="github" target="_blank" rel="noopener" href="//github.com/guidotorresmx"><span class="icon-text"> <span class="icon"><i class="fa fa-brands fa-github icon is-flex"></i></span></span></a><!-- Ins--><a class="button is-dark no-hover" title="instagram" target="_blank" rel="noopener" href="//www.instagram.com/guidotorresmx"><span class="icon-text"> <span class="icon"><i class="fa fa-brands fa-instagram icon is-flex"></i></span></span></a><!-- Linkedin--><a class="button is-dark no-hover" title="linkedin" target="_blank" rel="noopener" href="//www.linkedin.com/in/guidotorresmx"><span class="icon-text"> <span class="icon"><i class="fa fa-brands fa-linkedin icon is-flex"></i></span></span></a><!-- Facebook--><a class="button is-dark no-hover" title="facebook" target="_blank" rel="noopener" href="//www.facebook.com/guidotorresmx"><span class="icon-text"> <span class="icon"><i class="fa fa-brands fa-facebook icon is-flex"></i></span></span></a><!-- Mail--><a class="button is-dark no-hover" title="mail" href="mailto:marco@guidotorres.mx"><span class="icon-text"> <span class="icon"><i class="fa fa-solid fa-envelope-open icon is-flex"></i></span></span></a><!-- Whatsapp--><a class="button is-dark no-hover" title="whatsapp" target="_blank" rel="noopener" href="//wa.me/16479066194"><span class="icon-text"> <span class="icon"><i class="fa fa-brands fa-whatsapp icon is-flex"></i></span></span></a><!-- Telegram--><a class="button is-dark no-hover" title="telegram" target="_blank" rel="noopener" href="//t.me/guidotorresmx"><span class="icon-text"> <span class="icon"><i class="fa fa-brands fa-telegram icon is-flex is-flex"></i></span></span></a></div></div></div></div></nav><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Intro"><span class="toc-text">Intro</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#AWS-setup"><span class="toc-text">AWS setup</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Step-1-Create-a-new-user"><span class="toc-text">Step 1: Create a new user</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Step-2-Attach-necessary-policies"><span class="toc-text">Step 2: Attach necessary policies</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Step-3-Manage-credentials"><span class="toc-text">Step 3: Manage credentials</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Step-4-Create-S3-bucket"><span class="toc-text">Step 4: Create S3 bucket</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Step-5-Buckets-and-S3-static-website-hosting"><span class="toc-text">Step 5: Buckets and S3 static website hosting</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Step-6-Bucket-vs-public-access"><span class="toc-text">Step 6: Bucket vs public access</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Wrapping-up"><span class="toc-text">Wrapping up</span></a></li></ol></div><div class="column is-9"><header class="my-4"><a href="/tags/hexo"><i class="tag post-item-tag">hexo</i></a><a href="/tags/AWS"><i class="tag post-item-tag">AWS</i></a><a href="/tags/S3"><i class="tag post-item-tag">S3</i></a><a href="/tags/github"><i class="tag post-item-tag">github</i></a><a href="/tags/git"><i class="tag post-item-tag">git</i></a><a href="/tags/CI/CD"><i class="tag post-item-tag">CI/CD</i></a></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">Deploying static websites with S3 and Github actions: Part I</h1><time class="has-text-grey" datetime="2021-11-07T08:55:39.000Z">2021-11-07</time><article class="mt-2 post-content"><h1 id="Intro"><a href="#Intro" class="headerlink" title="Intro"></a>Intro</h1><p>Once your awesome Hexo static website is up and running, you may want to deploy it so everybody on the internet can actually read it. fortunately, there are multiple choices, but being myself a humble AWS <del>brainwashed</del> enthusiast, I’m going to introduce you to the github + github actions + route53 + s3 + CloudFront.</p>
<p>Note: Ignore the fact that github is now another service property of <del>the devil himself in the shape of a corporation</del> Microsoft and just follow me on this one, because publishing your website using github will bring you up some useful features.</p>
<h1 id="AWS-setup"><a href="#AWS-setup" class="headerlink" title="AWS setup"></a>AWS setup</h1><p>First things first, you have to go to <a target="_blank" rel="noopener" href="https://console.aws.amazon.com/console/" title="aws console">AWS console webapp</a> and create your AWS account, and set up a specific user for this task; you must not use your root account!</p>
<h2 id="Step-1-Create-a-new-user"><a href="#Step-1-Create-a-new-user" class="headerlink" title="Step 1: Create a new user"></a>Step 1: Create a new user</h2><p>Once you’d created your AWS account, go on and sign in, you will see a nice interface, with a top search omnibar. proceed and type IAM.</p>
<p><img src="/2021/11/07/deploying-with-github-actions/iam.png" alt="AWS search bar and IAM"></p>
<p>Then go to <strong>users</strong> on the left panel under <strong>access management</strong> and click on <strong>add Users</strong>; you just have to add a username, and a password policy.</p>
<p><img src="/2021/11/07/deploying-with-github-actions/iam-user-setup.png" alt="AWS new user and password policy"></p>
<h2 id="Step-2-Attach-necessary-policies"><a href="#Step-2-Attach-necessary-policies" class="headerlink" title="Step 2: Attach necessary policies"></a>Step 2: Attach necessary policies</h2><p>After clicking next, you will have to add attach the actual policies for your new user, type the services you need and check each one of them in the contiguous box. For the purpose of this walkthrough, the needed policies are the following (you will actually need a subset of this credentials, but that out of the scope for this post):</p>
<ul>
<li>CLoudFrontFullAccess</li>
<li>Route53FullAccess</li>
<li>S3FullAccess</li>
<li><del>SendBitcoinWalletToGuidoTorresMXFullAccess</del></li>
</ul>
<p> <img src="/2021/11/07/deploying-with-github-actions/iam-policies.png" alt="AWS new users policies"></p>
<h2 id="Step-3-Manage-credentials"><a href="#Step-3-Manage-credentials" class="headerlink" title="Step 3: Manage credentials"></a>Step 3: Manage credentials</h2><p>Once the new user is created, you will have full access to your generated credentials, so secure them before you lost them because you’re never going to see them again (specially if you generated the optional console access keys) and try login in with the secure link shown in the screen.</p>
<p><img src="/2021/11/07/deploying-with-github-actions/iam-user-credentials.png" alt="AWS new user generated credentials"></p>
<h2 id="Step-4-Create-S3-bucket"><a href="#Step-4-Create-S3-bucket" class="headerlink" title="Step 4: Create S3 bucket"></a>Step 4: Create S3 bucket</h2><p>The next step is quite easy, just navigate to S3 by search for it in the omnibar of the AWS Console and click on <strong>Create bucket</strong>. In the next screen choose a decent temporary name for your blog, such as s3-bucket-test (you will certainly not be able to choose that one because your bucket have to have a unique name across all AWS S3 containers online)</p>
<p><img src="/2021/11/07/deploying-with-github-actions/bucket.png" alt="AWS S3 Bucket creation"><br><img src="/2021/11/07/deploying-with-github-actions/bucket-options.png" alt="AWS S3 Bucket options"></p>
<h2 id="Step-5-Buckets-and-S3-static-website-hosting"><a href="#Step-5-Buckets-and-S3-static-website-hosting" class="headerlink" title="Step 5: Buckets and S3 static website hosting"></a>Step 5: Buckets and S3 static website hosting</h2><p>After creating the bucket, select it and go to <strong>properties</strong>, the navigate to the bottom of the site until the <strong>static website hosting</strong> section shows up. Edit it and update the fields with the same info showed in the next image:</p>
<p><img src="/2021/11/07/deploying-with-github-actions/bucket-template.png" alt="AWS S3 Bucket template"></p>
<h2 id="Step-6-Bucket-vs-public-access"><a href="#Step-6-Bucket-vs-public-access" class="headerlink" title="Step 6: Bucket vs public access"></a>Step 6: Bucket vs public access</h2><p>Once the bucket is set, you have to make it available for the outside world, so you have to specify the policies attached to it: go to permissions tab in your bucket and select edit under bucket policy, then copy the next policy in it (protip: replace <bucket-name> with your bucket’s name).</bucket-name></p>
<pre><code class="json">{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Sid": "PublicReadGetObject",
            "Effect": "Allow",
            "Principal": "*",
            "Action": [
                "s3:GetObject"
            ],
            "Resource": [
                "arn:aws:s3:::&lt;bucket-name&gt;/*"
            ]
        }
    ]
}
</code></pre>
<h1 id="Wrapping-up"><a href="#Wrapping-up" class="headerlink" title="Wrapping up"></a>Wrapping up</h1><p>Once everything is done, you could upload a simple index.html file to your bucket and view it rendered when visiting the site of your bucket. This is nice, but we are far from done and <del>I’m falling asleep</del> I don’t want you to get you overwhelmed, so this walkthrough will become a series of 4 parts 🤷‍♂️💁.   </p>
</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><a class="button is-default" href="/2021/11/10/github-copilot/" title="Github Copilot"><i class="iconfont icon-prev mr-2 has-text-grey"></i><span class="has-text-weight-semibold">Previous: Github Copilot</span></a><a class="button is-default" href="/2021/11/02/asset-folders/" title="Asset Folders"><span class="has-text-weight-semibold">Next: Asset Folders</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section><article class="mt-6 comment-container"><script async repo="guidotorresmx" src="https://utteranc.es/client.js" issue-term="pathname" theme="preferred-color-scheme"></script></article></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><a title="twitter" target="_blank" rel="noopener nofollow" href="//twitter.com/guidotorresmx"><i class="fa fa-brands fa-twitter icon"></i></a><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/guidotorresmx"><i class="fa fa-brands fa-github icon"></i></a><a title="instagram" target="_blank" rel="noopener nofollow" href="//www.instagram.com/guidotorresmx"><i class="fa fa-brands fa-instagram icon"></i></a><a title="linkedin" target="_blank" rel="noopener nofollow" href="//www.linkedin.com/in/guidotorresmx"><i class="fa fa-brands fa-linkedin icon"></i></a><a title="facebook" target="_blank" rel="noopener nofollow" href="//www.facebook.com/guidotorresmx"><i class="fa fa-brands fa-facebook icon"></i></a><a title="mail" target="_blank" rel="noopener nofollow" href="mailto:marco@guidotorres.mx"><i class="fa fa-solid fa-envelope-open icon"></i></a><a title="whatsapp" target="_blank" rel="noopener nofollow" href="//wa.me/16479066194"><i class="fa fa-brands fa-whatsapp icon"></i></a><a title="telegram" target="_blank" rel="noopener nofollow" href="//t.me/guidotorresmx"><i class="fa fa-brands fa-telegram icon"></i></a></section><p class="text-center text-muted"><br>2022. guidotorresmx. All rights unreserved. Created by <a target="_blank" rel="noopener" href="https://github.com/guidotorresmx">@guidotorresmx</a>. Source code can be found at <a target="_blank" rel="noopener" href="https://github.com/guidotorresmx/blog">@guidotorresmx/resume</a> This blog uses Pug, Sass, Hexo, Bootstrap and Bulma.</p><div><span></span></div></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/js/post.js"></script></body></html>